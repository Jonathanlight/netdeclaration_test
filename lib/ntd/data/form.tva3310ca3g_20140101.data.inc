<?php


$operations = array(
  'calcul-ct' => array('function' => 'calcul',
                       'args' => array('items' => array('+|CB', '+|JA',
                                                        '+|CD', '+|CE', '+|JB',
                                                        '+|CF', '+|CG', '+|CH',
                                                        '+|CJ', '+|CK', '+|JC',
                                                        '+|CL', '+|CM', '+|CO', '+|CP',
                                                        '+|CQ', '+|CR', '+|CS',
                                                        '+|HV', '+|HW', '+|HX'),
                                       'field_result' => 'CT')),
  'calcul-dc' => array('function' => 'calcul',
                       'args' => array('items' => array('+|DA', '+|DB'),
                                       'field_result' => 'DC')),
  'calcul-ea' => array('function' => 'calcul',
                       'args' => array('items' => array('+|DC', '-|CT'),
                                       'field_result' => 'EA')),
  'calcul-ec' => array('function' => 'calcul',
                       'args' => array('items' => array('+|EA', '-|EB'),
                                       'field_result' => 'EC')),
  'calcul-fa' => array('function' => 'calcul',
                       'args' => array('items' => array('+|CT', '-|DC'),
                                       'field_result' => 'FA')),
  'calcul-fe' => array('function' => 'calcul',
                       'args' => array('items' => array('+|FA', '+|FB', '-|FC', '+|FD'),
                                       'field_result' => 'FE')),
  'calcul-hk' => array('function' => 'calcul',
                       'args' => array('items' => array('+|GA', '+|GB', '+|GD', '+|GE', '+|GF',
                                                        '+|GH', '+|GJ', '+|GK', '+|GL', '+|GM',
                                                        '+|GO', '+|GP', '+|GQ', '+|GR', '+|GS',
                                                        '+|GT', '+|GU', '+|GV', '+|GX', '+|GY',
                                                        '+|GZ',
                                                        '+|HB', '+|HC', '+|HD', '+|HE',
                                                        '+|HF', '+|HL', '+|HM', '+|HN', '+|HO', '+|HP',
                                                        '+|HQ', '+|HR', '+|HS', '+|HT', '+|HU',
                                                        '+|LA', '+|LB', '+|LC', '+|LD', '+|LF'),
                                       'field_result' => 'HK')),

);


/**  dans 3310 CA3 G :
3310CA3G_EB<= 3310CA3G_EA
3310CA3G_FB â‰¥ 0 = 3310CA3G_HK
3310CA3G_FC < = 3310CA3G_FA
3310CA3G_FC > 3310CA3G_FA+3310CA3G_FB+3310CA3G_FD
 */

$controls = array(
  'fc <= fa' => array('function' => 'equation',
                      'args' => array('left' => array('FC'),
                                      'right' => array('FA'),
                                      'operator' => '<=')),
  'eb <= ea' => array('function' => 'equation',
                      'args' => array('left' => array('EB'),
                                      'right' => array('EA'),
                                      'operator' => '<=')),
  'fc <= fa + fb + fd' => array('function' => 'equation',
                                'args' => array('left' => array('FC'),
                                                'right' => array('FA', 'FB', 'FD'),
                                                'operator' => '<='))

);


$form["tva3310ca3g_20140101"] = array(
  'BA' => array('type' => 'comments',
                'length' => 2560,
                'operations' => array(array('func' => 'data-check-need-and-or',
                                            'opt' => array('results' => array('BA'), 'operands' => array('BC')))),
  ),
  'BA1' => array('type' => 'comments-part',
                 'length' => 512,
  ),
  'BA2' => array('type' => 'comments-part',
                 'length' => 512,
  ),
  'BA3' => array('type' => 'comments-part',
                 'length' => 512,
  ),
  'BA4' => array('type' => 'comments-part',
                 'length' => 512,
  ),
  'BA5' => array('type' => 'comments-part',
                 'length' => 512,
  ),
  'BB' => array('type' => 'checkbox',
  ),
  'BC' => array('type' => 'checkbox',
                'value' => '1',
                'operations' => array(array('func' => 'data-check-need-and-or',
                                            'opt' => array('results' => array('BA'),
                                                           'operands' => array('BC')))),
  ),

  'CB' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
  ),
  'JA' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
                'display' => 'none'
  ),
  'CD' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
  ),
  'CE' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
  ),
  'JB' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
                'display' => 'none'
  ),
  'CF' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
  ),
  'CG' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
  ),
  'CH' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
  ),
  'CJ' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
  ),
  'CK' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
  ),
  'JC' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
                'display' => 'none'
  ),
  'CL' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
  ),
  'CM' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
  ),
  'CO' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
  ),
  'CP' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
  ),
  'CQ' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
  ),
  'CR' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
  ),
  'CS' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
  ),
  'CT' => array('type' => 'number',
                'operations' => array($operations['calcul-ea'], $operations['calcul-fa'])
  ),


  'DA' => array('type' => 'number',
                'operations' => array($operations['calcul-dc']),
  ),
  'DB' => array('type' => 'number',
                'operations' => array($operations['calcul-dc']),
  ),
  'DC' => array('type' => 'number',
                'operations' => array($operations['calcul-ea'], $operations['calcul-fa']),
  ),


  'EA' => array('type' => 'number',
                'operations' => array($operations['calcul-ec']),
  ),
  'EB' => array('type' => 'number',
                'operations' => array($operations['calcul-ec'],
                                      $controls['eb <= ea']),
  ),
  'EC' => array('type' => 'number',
  ),

  'FA' => array('type' => 'number',
                'operations' => array($operations['calcul-fe']),
  ),
  'FB' => array('type' => 'number',
                'operations' => array($operations['calcul-fe']),
  ),
  'FC' => array('type' => 'number',
                'operations' => array($operations['calcul-fe'],
                                      $controls['fc <= fa'],
                                      $controls['fc <= fa + fb + fd']),
  ),
  'FD' => array('type' => 'number',
                'operations' => array($operations['calcul-fe']),
  ),
  'FE' => array('type' => 'number',
                'operations' => array(array('function' => 'paiement', 'args' => array('field' => 'FE'))),
  ),


  'GA' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'GB' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'GD' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'GE' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'GF' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'GH' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'GJ' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'GK' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'GL' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'GM' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'GO' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'GP' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'GQ' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'GR' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'GS' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'GT' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'GU' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'GV' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'GX' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'GY' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'GZ' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'HB' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'HC' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'HD' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'HE' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'HF' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'HL' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'HM' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'HN' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'HO' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'HP' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'HQ' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'HR' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'HS' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'HT' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'HU' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
  ),
  'HV' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
  ),
  'HW' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
  ),
  'HX' => array('type' => 'number',
                'operations' => array($operations['calcul-ct']),
  ),

  'LA' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
                'display' => 'none'
  ),
  'LB' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
                'display' => 'none'
  ),
  'LC' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
                'display' => 'none'
  ),
  'LD' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
                'display' => 'none'
  ),
  'LF' => array('type' => 'number',
                'operations' => array($operations['calcul-hk']),
                'display' => 'none'
  ),
  'HK' => array('type' => 'number',
                'operations' => array(array('function' => 'copy-value', 'args' => array('target' => 'tva3310ca3g_20140101_FB')))
  ),


);
