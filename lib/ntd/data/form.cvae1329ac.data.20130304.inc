<?php

$operations = array(
  'data-montant-cotisation' => array('func' => 'data-montant-cotisation',
                                     'opt' => array('items' => array('AC', 'BA', 'BB', 'BC', 'CA'))),
  'data-soustraction-ea' => array('func' => 'data-soustraction',
                                  'opt' => array('results' => array('EA'),
                                                 'value' => 'CB',
                                                 'operands' => array('DA', 'DB'))),
  'data-addition-jb' => array('func' => 'data-addition',
                              'opt' => array('results' => array('JB'),
                                             'operands' => array('ED', 'GB', 'HA'))),
  'resultat-ka' => array('func' => 'data-soustraction',
                         'opt' => array('results' => array('KA'),
                                        'value' => 'JB',
                                        'operands' => array('JC'))),
  'accompte-a-verser' => array('function' => 'calcul',
                               'args' => array('items' => array('+|EA', '+|EB', '-|EC'), 'field_result' => 'ED')),
  'calculHA' => array('function' => 'itemsSumAndPercent',
                      'args' => array('result_field' => 'HA',
                                      'items' => array('ED', 'GB'),
                                      'percent' => 0.01)),
  'calculGB' => array('function' => 'ifCheckboxThenMultiplyFieldByPercent',
                      'args' => array('result_field' => 'GB',
                                      'field' => 'ED',
                                      'checkbox' => 'GA',
                                      'percent' => 0.06823)),
  'calcul-d' => array('func' => 'data-calc-d',
                      'opt' => array('results' => array('BB'), 'operands' => array('BC', 'AA', 'AB'))),
  'only-AA-or-AD' => array('function' => 'onlyOneInputFilled', 'args' => array('items' => array('AA', 'AD')))
);

$operations['only-AA-or-AD'];

$form["cvae1329ac"] = array(
  'AA' => array('type' => 'number',
                'operations' => array(array('func' => 'data-calc-b',
                                            'opt' => array('results' => array('AC'), 'operands' => array('AA', 'AD')),
                ),
                                      $operations['calcul-d'],
                                      $operations['only-AA-or-AD'],
                                      array('func' => 'data-calc-fac',
                                            'opt' => array('items' => array('CB', 'AA', 'AD', 'CA')),
                                      ),
                ),
  ),
  'AB' => array('type' => 'number',
                'operations' => array($operations['calcul-d']
                ),
  ),
  'AD' => array('type' => 'number',
                'operations' => array($operations['calcul-d'],
                                      array('func' => 'data-calc-b',
                                            'opt' => array('results' => array('AC'), 'operands' => array('AA', 'AD'))),
                                      array('func' => 'data-calc-fac',
                                            'opt' => array('items' => array('CB', 'AA', 'AD', 'CA'))),
                                      $operations['only-AA-or-AD']),
  ),
  'AC' => array('type' => 'pourcentage',
                'operations' => array($operations['data-montant-cotisation'],),
  ),
  'BA' => array('type' => 'number',
                'operations' => array($operations['data-montant-cotisation']),
  ),
  'BB' => array('required' => false,
                'type' => 'number',
                'operations' => array($operations['data-montant-cotisation']),
  ),
  'BC' => array('required' => false,
                'type' => 'checkbox',
                'value' => '1',
                'operations' => array($operations['data-montant-cotisation'], $operations['calcul-d']),
  ),
  'CA' => array('type' => 'number',
                'operations' => array(array('func' => 'data-calc-fac',
                                            'opt' => array('items' => array('CB', 'AA', 'AD', 'CA')))),
  ),
  'CB' => array('type' => 'number',
                'operations' => array($operations['data-soustraction-ea']),
  ),
  'DA' => array('type' => 'number',
                'operations' => array($operations['data-soustraction-ea']),
  ),
  'DB' => array('type' => 'number',
                'operations' => array($operations['data-soustraction-ea']),
  ),

  'EA' => array('type' => 'number',
                'operations' => array($operations['accompte-a-verser']),
  ),
  'EB' => array('type' => 'number',
                'operations' => array($operations['accompte-a-verser']),
  ),
  'EC' => array('type' => 'number',
                'operations' => array($operations['accompte-a-verser']),
  ),
  'ED' => array('type' => 'number',
                'operations' => array($operations['calculHA'],
                                      $operations['calculGB'],
                                      $operations['data-addition-jb']),
  ),
  'GA' => array('type' => 'checkbox',
                'operations' => array($operations['calculGB']),
  ),
  'GB' => array('type' => 'number',
                'operations' => array($operations['calculHA'],
                                      $operations['data-addition-jb']),
  ),
  'HA' => array('type' => 'number',
                'operations' => array($operations['data-addition-jb']),
  ),
  'JB' => array('type' => 'number',
                'operations' => array($operations['resultat-ka'])
  ),
  'JC' => array('type' => 'number',
                'operations' => array($operations['resultat-ka'])
  ),
  'KA' => array('type' => 'number',
                'operations' => array(array('function' => 'paiement',
                                            'args' => array('item' => 'KA',
                                                            'amount_max' => 1500))),
  ),
);
